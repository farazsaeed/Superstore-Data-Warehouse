DROP TABLE IF exists FACT_SALE;
DROP TABLE IF exists DIM_CUSTOMER;
DROP TABLE IF exists DIM_PRODUCT;
DROP TABLE IF exists DIM_STORE;
DROP TABLE IF exists DIM_SUPPLIER;
DROP TABLE IF exists DIM_DATE;





CREATE TABLE DIM_CUSTOMER 
(
  CUSTOMER_ID VARCHAR(6) NOT NULL 
, CUSTOMER_NAME VARCHAR(30) 
, CONSTRAINT DIM_CUSTOMER_PK PRIMARY KEY 
  (
    CUSTOMER_ID 
  )

);


CREATE TABLE DIM_PRODUCT 
(
  PRODUCT_ID VARCHAR(6) NOT NULL 
, PRODUCT_NAME VARCHAR(30) 
, PRICE DECIMAL(5,2) 
, CONSTRAINT DIM_PRODUCT_PK PRIMARY KEY 
  (
    PRODUCT_ID 
  )

);

CREATE TABLE DIM_STORE 
(
  STORE_ID VARCHAR(4) NOT NULL 
, STORE_NAME VARCHAR(20) 
, CONSTRAINT DIM_STORE_PK PRIMARY KEY 
  (
    STORE_ID 
  )

);

CREATE TABLE DIM_SUPPLIER 
(
  SUPPLIER_ID VARCHAR(5) NOT NULL 
, SUPPLIER_NAME VARCHAR(30) 
, CONSTRAINT DIM_SUPPLIER_PK PRIMARY KEY 
  (
    SUPPLIER_ID 
  )

);


CREATE TABLE DIM_DATE 
(
  T_DATE DATE NOT NULL 
, WWEEKEND VARCHAR(10) 
, MMONTH VARCHAR(10) 
, QQUARTER VARCHAR(10) 
, YYEAR VARCHAR(10) 
, CONSTRAINT DIM_DATE_PK PRIMARY KEY 
  (
    T_DATE 
  )

);


CREATE TABLE FACT_SALE 
(
  TRANSACTION_ID VARCHAR(8) NOT NULL 
, CUSTOMER_ID VARCHAR(4) 
, PRODUCT_ID VARCHAR(6) 
, STORE_ID VARCHAR(4) 
, SUPPLIER_ID VARCHAR(5) 
, T_DATE DATE 
, QUANTITY DECIMAL(3,0) 
, TOTAL_SALE DECIMAL(5,2) 
, CONSTRAINT FACT_SALE_PK PRIMARY KEY 
  (
    TRANSACTION_ID 
  )
  
);

ALTER TABLE FACT_SALE
ADD CONSTRAINT FACT_SALE_FK1 FOREIGN KEY
(
  CUSTOMER_ID 
)
REFERENCES DIM_CUSTOMER
(
  CUSTOMER_ID 
)
;

ALTER TABLE FACT_SALE
ADD CONSTRAINT FACT_SALE_FK2 FOREIGN KEY
(
  T_DATE 
)
REFERENCES DIM_DATE
(
  T_DATE 
)
;

ALTER TABLE FACT_SALE
ADD CONSTRAINT FACT_SALE_FK3 FOREIGN KEY
(
  PRODUCT_ID 
)
REFERENCES DIM_PRODUCT
(
  PRODUCT_ID 
)
;

ALTER TABLE FACT_SALE
ADD CONSTRAINT FACT_SALE_FK4 FOREIGN KEY
(
  STORE_ID 
)
REFERENCES DIM_STORE
(
  STORE_ID 
)
;

ALTER TABLE FACT_SALE
ADD CONSTRAINT FACT_SALE_FK5 FOREIGN KEY
(
  SUPPLIER_ID 
)
REFERENCES DIM_SUPPLIER
(
  SUPPLIER_ID 
)
;

